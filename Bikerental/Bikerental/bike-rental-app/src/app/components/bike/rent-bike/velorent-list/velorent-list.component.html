<div class="container py-5">
  <!-- Formulaire de création/mise à jour sous forme de carte -->
  <div class="card shadow-lg p-4">
    <form (ngSubmit)="submit()" class="row g-4">
      <div class="col-12">
        <input [(ngModel)]="form.veloId" name="veloId" class="form-control input-style" placeholder="ID du vélo" required [ngClass]="{'is-invalid': submitted && !form.veloId}" />
        <div *ngIf="submitted && !form.veloId" class="invalid-feedback">L'ID du vélo est requis.</div>
      </div>
      <div class="col-12">
        <input [(ngModel)]="form.userId" name="userId" class="form-control input-style" placeholder="ID utilisateur" required [ngClass]="{'is-invalid': submitted && !form.userId}" />
        <div *ngIf="submitted && !form.userId" class="invalid-feedback">L'ID utilisateur est requis.</div>
      </div>
      <div class="col-12">
        <input [(ngModel)]="form.startRentDate" name="startRentDate" type="date" class="form-control input-style" required [ngClass]="{'is-invalid': submitted && !form.startRentDate}" />
        <div *ngIf="submitted && !form.startRentDate" class="invalid-feedback">La date de début est requise.</div>
      </div>
      <div class="col-12">
        <input [(ngModel)]="form.endRentDate" name="endRentDate" type="date" class="form-control input-style" required [ngClass]="{'is-invalid': submitted && !form.endRentDate}" />
        <div *ngIf="submitted && !form.endRentDate" class="invalid-feedback">La date de fin est requise.</div>
      </div>
      <div class="col-12">
        <input [(ngModel)]="form.fromLocation" name="fromLocation" class="form-control input-style" placeholder="Départ" required [ngClass]="{'is-invalid': submitted && !form.fromLocation}" />
        <div *ngIf="submitted && !form.fromLocation" class="invalid-feedback">Le lieu de départ est requis.</div>
      </div>
      <div class="col-12">
        <input [(ngModel)]="form.toLocation" name="toLocation" class="form-control input-style" placeholder="Arrivée" required [ngClass]="{'is-invalid': submitted && !form.toLocation}" />
        <div *ngIf="submitted && !form.toLocation" class="invalid-feedback">Le lieu d'arrivée est requis.</div>
      </div>
      <div class="col-12 text-center">
        <button type="submit" class="btn btn-primary btn-lg btn-block submit-btn">
          {{ form.id ? 'Mettre à jour' : 'Créer une location' }}
        </button>
      </div>
    </form>
  </div>

  <!-- Liste des vélos loués -->
  <div *ngFor="let v of velorents" class="card mb-4 shadow-lg rounded">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div class="mb-2 text-muted">
        <strong>ID:</strong> {{ v.id }} |
        <strong>Utilisateur:</strong> {{ v.userId }} |
        <strong>De:</strong> {{ v.fromLocation }} → <strong>À:</strong> {{ v.toLocation }} |
        <strong>Début:</strong> {{ v.startRentDate }} | <strong>Fin:</strong> {{ v.endRentDate }}
      </div>
      <div>
        <button (click)="edit(v)" class="btn btn-warning btn-sm me-2">Modifier</button>
        <button (click)="delete(v.id)" class="btn btn-danger btn-sm">Supprimer</button>
      </div>
    </div>
  </div>

  <!-- Message si aucune location -->
  <div *ngIf="velorents.length === 0" class="alert alert-secondary text-center">
    Aucune location de vélo enregistrée.
  </div>
</div>
